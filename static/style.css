/* ============ Design tokens ============ */
:root{
  /* your existing palette (kept) */
  --bg:#0a0e1a; --card:#1a1f2e; --card-hover:#212738;
  --text:#f0f4ff; --text-secondary:#b8c5ff; --muted:#7a8bb8;
  --ok:#00d4aa; --warn:#ffb347; --bad:#ff6b6b;
  --primary:#6366f1; --primary-hover:#4f46e5;
  --border:#2d3748; --border-light:#4a5568;
  --shadow:rgba(0,0,0,.3); --shadow-lg:rgba(0,0,0,.5);

  /* subtle surface tones used by the new layout */
  --panel:#101a31; --panel-2:#0f1727;
}

/* ============ Base ============ */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; padding:0;
  font-family:Inter,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
  color:var(--text); line-height:1.6;
  background:
    radial-gradient(1200px 600px at 10% -10%, #152042 0%, transparent 60%),
    radial-gradient(900px 500px at 90% 0%, #111b36 0%, transparent 55%),
    linear-gradient(135deg, var(--bg) 0%, #111628 100%);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* container (new) */
.shell{max-width:1100px; margin:0 auto; padding:24px}
@media (max-width: 768px){ .shell{padding:16px} }

/* legacy container (still supported) */
.wrap{max-width:800px; margin:0 auto; padding:2rem 1.5rem; min-height:100vh; display:flex; flex-direction:column}

/* ============ Top bar ============ */
.topbar{display:flex; align-items:center; justify-content:space-between; padding:6px 0 10px}
.brand{display:flex; align-items:center; gap:.6rem; color:#9fb0ff; font-weight:700; letter-spacing:.3px}
.logo{width:28px; height:28px; color:#9fb0ff}
.wordmark{font-size:20px}
.beta{font-size:12px; color:var(--muted); border:1px solid var(--border); padding:.15rem .45rem; border-radius:999px}

/* ============ Hero ============ */
header.hero{padding:40px 0 22px; border-bottom:1px solid var(--border)}
header.hero h1{
  margin:0 0 8px; font-size:clamp(28px,3.5vw,42px); font-weight:800; letter-spacing:.2px;
  background:linear-gradient(135deg,var(--text) 0%, var(--text-secondary) 100%);
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
  text-shadow:0 2px 6px rgba(0,0,0,.25);
}
header.hero .subtitle{margin:0 0 16px; color:var(--muted)}

/* legacy title block (still supported) */
.logo-container{display:flex; align-items:center; justify-content:center; gap:1rem; margin-bottom:1rem}
.logo-container .logo{width:60px; height:60px}
h1{margin:0; font-size:3rem; font-weight:800}
.subtitle{text-align:center; font-size:1.125rem; max-width:640px; margin:.25rem auto 2rem; color:var(--text-secondary)}

/* ============ Input bar / form ============ */
.input-bar, #check-form{display:flex; gap:10px; align-items:center}
#check-form{margin-top:8px}
#check-form input{
  flex:1; min-width:0; height:48px; border-radius:12px;
  border:1px solid var(--border-light); background:#101a31; color:var(--text); padding:0 14px;
  transition:.2s ease;
}
#check-form input::placeholder{color:#7c88a3}
#check-form input:focus{outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(99,102,241,.15)}
#check-btn{
  height:48px; padding:0 16px; border-radius:12px; border:0; cursor:pointer;
  background:linear-gradient(180deg,var(--primary),var(--primary-hover)); color:#fff; font-weight:700;
  display:flex; align-items:center; gap:.45rem; box-shadow:0 8px 22px rgba(99,102,241,.32); transition:.2s ease;
}
#check-btn:hover:not(:disabled){transform:translateY(-1px); box-shadow:0 12px 28px rgba(99,102,241,.42)}
#check-btn:disabled{opacity:.6; cursor:not-allowed}

/* ============ Grid layout ============ */
main.grid{display:grid; gap:18px; margin:24px 0 40px; grid-template-columns:1fr}
@media (min-width:980px){ main.grid{grid-template-columns:1fr 1fr} }

/* ============ Cards ============ */
.card{
  background:linear-gradient(180deg,var(--panel-2),#101b33);
  border:1px solid var(--border); border-radius:16px; padding:18px;
  box-shadow:0 10px 30px rgba(8,15,35,.35), 0 1px 0 rgba(255,255,255,.03) inset;
  transition:.2s ease; margin:1rem 0;
}
.card:hover{transform:translateY(-2px); box-shadow:0 16px 40px var(--shadow-lg); border-color:var(--border-light)}
.card.nested{margin-top:12px; background:#121c32}

/* Section titles */
.section-title{font-weight:700; margin-bottom:10px; letter-spacing:.2px}

/* ============ Reusable buttons ============ */
.btn{
  border:1px solid #2a3860; background:#1a2442; color:var(--text);
  padding:.6rem .9rem; border-radius:12px; display:inline-flex; align-items:center; gap:.45rem; cursor:pointer;
  transition:.2s ease;
}
.btn:hover{transform:translateY(-1px)}
.btn.warn{border-color:#4b2e18; background:#2a1c12; color:#ffd29a}

/* ============ Badges ============ */
.badge{display:inline-flex; align-items:center; padding:.45rem .8rem; border-radius:999px; font-weight:700; font-size:.82rem; letter-spacing:.03em}
.badge.ok{background:rgba(0,212,170,.14); color:var(--ok); border:1px solid rgba(0,212,170,.32)}
.badge.warn{background:rgba(255,179,71,.12); color:var(--warn); border:1px solid rgba(255,179,71,.32)}
.badge.bad{background:rgba(255,107,107,.12); color:var(--bad); border:1px solid rgba(255,107,107,.32)}

/* ============ Lists/typography helpers ============ */
.kv{color:var(--text-secondary); font-size:.9rem; font-weight:500; margin-bottom:.5rem}
ul{margin:.5rem 0 0 1.4rem; padding:0}
li{margin-bottom:.45rem}

/* ============ QR scanner ============ */
.qr-stage{margin-top:10px; border:1px dashed var(--border-light); border-radius:12px; padding:10px; background:#0c1426}
.qr-wrap{background:var(--card); border:1px solid var(--border); border-radius:1.25rem; padding:2rem; margin:2rem 0; box-shadow:0 10px 25px var(--shadow)}
.qr-wrap .kv{font-size:1.125rem; font-weight:600; color:var(--text); margin-bottom:1rem}
.row{display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; margin:1rem 0}
.row .btn{font-size:.9rem}
.hint{opacity:.85; font-size:.9rem; color:var(--muted)}
#qr-file{padding:.5rem; border:1px solid var(--border); border-radius:.5rem; background:rgba(255,255,255,.04); color:var(--text); font-size:.875rem}
video#qr-video{width:100%; max-height:260px; background:#0b1223; border-radius:10px; border:1px solid var(--border)}
canvas#qr-canvas{display:none}

/* ============ Email scan ============ */
.forward-row{display:flex; align-items:center; gap:10px; margin-top:8px}
.forward-label{color:var(--muted)}
code.copy{user-select:all; cursor:pointer}

/* ============ Tables inside analysis (redirect chain) ============ */
table{width:100%; border-collapse:collapse}
th,td{border-bottom:1px solid var(--border); padding:.55rem .5rem; text-align:left; font-size:.92rem}
thead th{color:var(--muted); font-weight:600}

/* ============ Footer ============ */
footer{border-top:1px solid var(--border); padding:20px 0 36px; color:var(--muted); text-align:center; margin-top:auto}

/* ============ Utilities ============ */
.hidden{display:none !important}
.loading{animation:pulse 1.5s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
*{transition:all .2s ease}

/* ============ Responsive ============ */
@media (max-width:768px){
  .logo-container .logo{width:50px; height:50px}
  h1{font-size:2.5rem}
  .subtitle{font-size:1rem}
  .row{flex-direction:column; align-items:stretch}
  .row .btn{width:100%}
}
@media (max-width:480px){
  .logo-container .logo{width:40px; height:40px}
  h1{font-size:2rem}
  .card,.qr-wrap{padding:1.25rem}
}

/* ============ Nice scrollbar ============ */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border-light); border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:#2f3c5f}

/* --- Email Scan: links layout --- */
.scan-links { margin-top: 10px; }

.scan-links .row { justify-content: space-between; align-items: center; }

.link-list {
  list-style: none;
  margin: 8px 0 0;
  padding: 0;
  max-height: 220px;           /* scroll instead of stretching card */
  overflow: auto;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: #0c1426;
}

.link-item {                   /* each raw link row before analysis */
  padding: 8px 10px;
  border-bottom: 1px solid var(--border);
}
.link-item:last-child { border-bottom: 0; }

.link-item a {
  display: block;
  color: #9fc3ff;
  text-decoration: none;
  white-space: nowrap;         /* single line */
  overflow: hidden;
  text-overflow: ellipsis;     /* â€¦ */
}
.link-item a:hover { text-decoration: underline; }

/* results grid for analyzed links */
.link-results {
  display: grid;
  grid-template-columns: 1fr;  /* one clean column in that narrow right pane */
  gap: 12px;
  margin-top: 12px;
}

.link-card {
  background: #0f1727;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}

.link-card .url {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
  color: #8fb3ff;
  overflow-wrap: anywhere;     /* wrap long URLs inside result cards */
}

.link-card .summary { color: var(--muted); font-size: .95rem; margin-top: 6px; }

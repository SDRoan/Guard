<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Guard ‚Äî Link & QR Risk Check</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="/static/style.css" rel="stylesheet" />
  <link rel="icon" type="image/png" href="/static/logo.png" />

  <!-- Lightweight, self-contained layout polish (works with your existing CSS vars) -->
  <style>
    :root {
      /* falls back safely if your /static/style.css already defines these */
      --bg: #070b14; --bg2:#0d1226; --panel:#0f1727; --panel2:#111b31;
      --border:#1e2a43; --border-light:#243250; --text:#e8edf6; --muted:#9aa6bd;
      --primary:#7c5cff;
    }
    body {
      margin:0; color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, #152042 0%, transparent 60%),
        radial-gradient(900px 500px at 90% 0%, #111b36 0%, transparent 55%),
        linear-gradient(180deg, #0a0f1f, var(--bg2));
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      font:16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    }
    .shell { max-width:1100px; margin:0 auto; padding:24px; }

    /* Top bar */
    .topbar { display:flex; align-items:center; justify-content:space-between; padding:6px 0 10px; }
    .brand { display:flex; align-items:center; gap:.6rem; color:#9fb0ff; font-weight:700; letter-spacing:.3px; }
    .logo { width:28px; height:28px; color:#9fb0ff; }
    .wordmark { font-size:20px; }
    .beta { font-size:12px; color:var(--muted); border:1px solid var(--border); padding:.15rem .45rem; border-radius:999px; }

    /* Hero */
    header.hero { padding:40px 0 22px; border-bottom:1px solid var(--border); text-align:left; }
    header.hero h1 { margin:0 0 8px; font-size:clamp(28px,3.5vw,42px); font-weight:800; letter-spacing:.2px; }
    header.hero h1 span { background:linear-gradient(90deg,#a185ff,#65e0ff); -webkit-background-clip:text; background-clip:text; color:transparent; }
    header.hero .subtitle { margin:0 0 16px; color:var(--muted); }

    /* Input bar */
    .input-bar { display:flex; gap:10px; }
    #check-form input { flex:1; min-width:0; height:48px; border-radius:12px; border:1px solid var(--border-light); background:#101a31; color:var(--text); padding:0 14px; }
    #check-form input::placeholder { color:#7c88a3; }
    #check-btn { height:48px; padding:0 16px; border-radius:12px; border:0; background:linear-gradient(180deg,var(--primary),#5a3fe3); color:#fff; font-weight:700; display:flex; align-items:center; gap:.45rem; }

    /* Grid */
    main.grid { display:grid; gap:18px; margin:24px 0 40px; grid-template-columns:1fr; }
    @media (min-width:980px){ main.grid { grid-template-columns:1fr 1fr; } }

    /* Cards */
    .card { background:linear-gradient(180deg,#0f1727,#111b31); border:1px solid var(--border); border-radius:16px; padding:18px; box-shadow:0 10px 30px rgba(8,15,35,.35), 0 1px 0 rgba(255,255,255,.03) inset; }
    .card.nested { margin-top:12px; background:#121c32; }
    .section-title { font-weight:700; margin-bottom:10px; letter-spacing:.2px; }

    /* Rows/helpers */
    .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .kv + .kv { margin-top:8px; }
    .hint { opacity:.8; font-size:.92rem; color:var(--muted); }
    .status { color:var(--muted); }

    /* Buttons */
    .btn { border:1px solid #2a3860; background:#1a2442; color:var(--text); padding:.55rem .8rem; border-radius:12px; display:inline-flex; align-items:center; gap:.45rem; cursor:pointer; }
    .btn.warn { border-color:#4b2e18; background:#2a1c12; color:#ffd29a; }
    button span { margin-right:.5rem; }
    input:focus, button:focus { outline:2px solid var(--primary); outline-offset:2px; }

    /* QR stage */
    .qr-stage { margin-top:10px; border:1px dashed var(--border-light); border-radius:12px; padding:10px; background:#0c1426; }
    video#qr-video { width:100%; max-height:260px; background:#0b1223; border-radius:10px; display:block; }
    canvas#qr-canvas { display:none; }

    .forward-row { display:flex; align-items:center; gap:10px; margin-top:8px; }
    .forward-label { color:var(--muted); }
    code.copy { user-select:all; cursor:pointer; }

    /* Keep your existing helpers/animations */
    .hidden { display:none !important; }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }
    .loading { animation:pulse 1.5s ease-in-out infinite; }
    * { transition: all .2s ease; }
    @keyframes fadeInUp { from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:none} }
    @keyframes slideIn { from{opacity:0; transform:translateX(-20px)} to{opacity:1; transform:none} }
    .card { animation: fadeInUp .4s ease-out; }
    .qr-wrap { animation: slideIn .4s ease-out; }

    /* Scrollbar (nice-to-have) */
    ::-webkit-scrollbar { width:8px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border-light); border-radius:4px; }
    ::-webkit-scrollbar-thumb:hover { background: #2f3c5f; }

    footer { border-top:1px solid var(--border); padding:18px 0 38px; color:var(--muted); text-align:center; }
    .badge { padding:.2rem .5rem; border:1px solid var(--border); border-radius:8px; font-size:.8rem; }

    /* --- center the hero --- */
header.hero { 
  text-align: center;            /* was left */
}

header.hero h1 {
  margin-left: auto;
  margin-right: auto;
}

header.hero .subtitle {
  text-align: center;
  max-width: 820px;
  margin-left: auto;
  margin-right: auto;
}

/* center the input bar */
.input-bar {
  justify-content: center;
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
}

  </style>
</head>
<body>
  <div class="shell">
    <!-- Top bar -->
    <nav class="topbar">
      <div class="brand">
        <svg class="logo" viewBox="0 0 100 100" aria-hidden="true">
          <path d="M50 8 L85 28 L85 63 Q85 78 70 88 L50 98 L30 88 Q15 78 15 63 L15 28 Z" fill="currentColor"/>
        </svg>
        <span class="wordmark">Guard</span>
      </div>
      <div class="beta">Beta</div>
    </nav>

    <!-- Hero -->
    <header class="hero">
      <h1>Know what a link really does <span>before</span> you open it.</h1>
      <p class="subtitle">Paste a link or scan a QR. We fetch safely, analyze with ML, and explain in plain English.</p>

      <form id="check-form" class="input-bar" autocomplete="off">
        <input id="url-input" type="text" placeholder="https://example.com/path?query=‚Ä¶" inputmode="url" />
        <button id="check-btn" type="submit"><span>üîç</span> Check Link</button>
      </form>
      <div id="result" class="card hidden" aria-live="polite"></div>
    </header>

    <!-- Content grid -->
    <main class="grid">
      <!-- Left: QR -->
      <section class="card">
        <div class="section-title">üì± QR Scanner</div>
        <div class="row" style="margin:8px 0;">
          <button id="qr-start" type="button" class="btn"><span>üì∑</span> Start Camera</button>
          <button id="qr-stop" type="button" class="btn warn"><span>‚èπÔ∏è</span> Stop Camera</button>
          <span class="hint">or upload a photo of a QR</span>
          <input id="qr-file" type="file" accept="image/*" />
        </div>
        <div class="qr-stage">
          <video id="qr-video" playsinline muted></video>
          <canvas id="qr-canvas"></canvas>
        </div>
        <div id="qr-result" class="card nested hidden" aria-live="polite"></div>
      </section>

      <!-- Right: Email scan -->
      <section class="card" id="scan-only">
        <div class="section-title">‚úâÔ∏è Email Scan (private)</div>
        <p class="hint" style="margin:6px 0 12px;">
          Generate a unique forwarding address. Forward your suspicious email there. This page will only show <em>your</em> scan.
        </p>
        <div class="row" style="margin-bottom:10px;">
          <button id="gen-forward" class="btn"><span>üîë</span> Generate Forward Address</button>
          <span class="hint">Tip: subject fallback also works ‚Äî include <code>[GUARD:&lt;code&gt;]</code>.</span>
        </div>
        <div class="forward-row">
          <span class="forward-label"><strong>Forward to:</strong></span>
          <code id="forward-address" class="copy">‚Äî</code>
        </div>
        <p id="scan-status" class="status" aria-live="polite">Not started.</p>
        <div id="scan-card"></div>
      </section>
    </main>

    <footer>
      <small>‚ö†Ô∏è Don‚Äôt trust‚Äîverify. When in doubt, go directly to the official app/site.</small>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="/static/app.js?v=pro-ui"></script>
</body>
</html>
